.respira-root {
  position: relative;
  min-height: 100vh;
  padding: clamp(2rem, 5vh, 3rem);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  overflow: hidden;
  background:
    radial-gradient(circle at 50% -10%, color-mix(in oklab, var(--tone-surface) 90%, #ffffff 10%) 0, transparent 55%),
    radial-gradient(circle at 10% 120%, color-mix(in oklab, var(--accent) 12%, #0b1814 88%) 0, transparent 60%),
    var(--tone-surface);
  color: var(--tone-ink);
  transition:
    background 1400ms ease-out,
    filter 1200ms ease-out;
  filter: saturate(0.85) contrast(0.98);

  /* ðŸŒ¿ paleta Respira, legatÄƒ de Garden */
  --leaf-main: color-mix(in oklab, var(--accent) 26%, var(--tone-surface) 74%);
  --leaf-soft: color-mix(in oklab, var(--accent) 40%, var(--tone-surface) 60%);
  --leaf-shadow: color-mix(in oklab, var(--accent) 18%, #1c261f 82%);
  --bark-main: color-mix(in oklab, #8b6a4a 70%, var(--tone-surface) 30%);
  --bark-shadow: #4f3b2a;
  --breath-glow: radial-gradient(
    circle,
    color-mix(in oklab, var(--accent) 16%, #9ac3ae 84%) 0%,
    transparent 60%
  );
}

.respira-root[data-breathing='true'] {
  background:
    radial-gradient(circle at 50% 0%, color-mix(in oklab, var(--accent) 12%, #0b1814 88%) 0, transparent 60%),
    color-mix(in oklab, var(--tone-surface) 45%, #020809 55%);
  filter: saturate(0.82) brightness(0.98);
}

.respira-root::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 0);
  background-size: 140px 140px;
  opacity: 0.3;
  pointer-events: none;
}

.respira-root[data-breathing='true']::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(
      circle at 60% 12%,
      color-mix(in oklab, var(--accent, #4de2b0) 10%, transparent) 0,
      transparent 55%
    ),
    color-mix(in oklab, #0a120f 92%, #000000 8%);
  backdrop-filter: none;
  opacity: 1;
  transition: opacity 1000ms ease-out;
  pointer-events: none;
  z-index: 0;
}

.respira-root::before {
  opacity: 0;
  transition: opacity 1000ms ease-out;
}

.respira-chrome {
  display: none;
}

.respira-panic {
  display: none;
}

.respira-portal {
  margin: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.25rem;
  position: relative;
  z-index: 1;
  min-height: 60vh;
  width: 100%;
}

.respira-hero {
  position: relative;
  width: min(880px, 100vw - 3rem);
  aspect-ratio: 16 / 9;
  margin: clamp(3rem, 14vh, 6rem) auto 1.5rem;
  border-radius: 32px;
  overflow: hidden;
  box-shadow: 0 34px 90px rgba(0, 0, 0, 0.65);
  background:
    radial-gradient(circle at 10% 0%, rgba(255, 255, 255, 0.12), transparent 55%),
    radial-gradient(circle at 100% 100%, rgba(0, 0, 0, 0.7), transparent 60%);
}

.respira-hero-media {
  position: absolute;
  inset: 0;
  filter: saturate(0.85) brightness(0.94) contrast(0.96);
}

.respira-hero-media img,
.respira-hero-media > span {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: inherit;
}

.respira-mantra {
  font-size: 0.9rem;
  opacity: 0.85;
  text-align: center;
}

.respira-mountain-btn {
  margin-top: 0.25rem;
  padding: 0.9rem 2.8rem;
  border-radius: 999px / 26px;
  border: none;
  background: color-mix(in oklab, var(--accent, #4de2b0) 90%, #0c1411 10%);
  box-shadow: 0 14px 32px color-mix(in oklab, var(--accent, #4de2b0) 22%, #000000 78%);
  color: var(--on-accent, #02140f);
  font-size: 0.95rem;
  font-weight: 500;
  cursor: pointer;
  transition:
    transform 160ms ease,
    box-shadow 160ms ease,
    opacity 200ms ease;
}

.respira-mountain-btn:hover {
  transform: translateY(-1px) scale(1.01);
  box-shadow: 0 18px 42px color-mix(in oklab, var(--accent, #4de2b0) 26%, #000000 74%);
}

.respira-mountain-btn:active {
  transform: translateY(0) scale(0.99);
  box-shadow: 0 10px 24px color-mix(in oklab, var(--accent, #4de2b0) 20%, #000000 80%);
}

.respira-footer {
  display: flex;
  justify-content: center;
  padding-top: 0.75rem;
  padding-bottom: 0.25rem;
  position: relative;
  z-index: 2;
}

.respira-continue {
  font-size: 0.8rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  text-decoration: none;
  padding: 0.5rem 1.1rem;
  border-radius: 999px;
  color: inherit;
  opacity: 0;
  transform: translateY(4px);
  pointer-events: none;
  transition:
    opacity 800ms ease 3000ms,
    transform 800ms ease 3000ms;
}

.respira-root[data-show-continue='true'] .respira-continue {
  opacity: 0.7;
  transform: translateY(0);
  pointer-events: auto;
}

.respira-breath-layer {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  pointer-events: none;
  z-index: 2;
}

.respira-tree {
  position: relative;
  width: min(280px, 60vw);
  aspect-ratio: 3 / 4;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  transition: transform 900ms ease-out, filter 900ms ease-out;
}

.respira-tree-aura {
  position: absolute;
  inset: 8%;
  border-radius: 32px;
  background: var(--breath-glow);
  opacity: 0.9;
  transition:
    transform 800ms ease-out,
    opacity 800ms ease-out;
}

.respira-tree-canopy {
  position: absolute;
  inset: 10% 22% 32%;
  border-radius: 999px 999px 60px 60px;
  background: radial-gradient(
    ellipse at center,
    var(--leaf-soft) 0%,
    var(--leaf-main) 55%,
    var(--leaf-shadow) 100%
  );
  box-shadow:
    0 0 60px color-mix(in oklab, var(--leaf-soft) 30%, transparent),
    0 24px 40px rgba(0, 0, 0, 0.6);
  overflow: hidden;
  transition:
    transform 800ms ease-out,
    filter 800ms ease-out,
    opacity 800ms ease-out;
}

.respira-tree-canopy::before,
.respira-tree-canopy::after {
  content: '';
  position: absolute;
  bottom: 14%;
  width: 32%;
  height: 42%;
  border-radius: 999px;
  background: radial-gradient(
    ellipse at center,
    color-mix(in oklab, var(--leaf-soft) 65%, var(--leaf-main) 35%) 0%,
    var(--leaf-main) 70%,
    var(--leaf-shadow) 100%
  );
  opacity: 0.9;
}
.respira-tree-canopy::before {
  left: -8%;
}
.respira-tree-canopy::after {
  right: -8%;
}

.respira-tree-trunk {
  position: absolute;
  inset: auto 46% 16%;
  height: 32%;
  border-radius: 999px;
  background: linear-gradient(180deg, var(--bark-main), var(--bark-shadow));
  box-shadow:
    0 12px 24px rgba(0, 0, 0, 0.7),
    0 0 0 1px rgba(0, 0, 0, 0.35);
}

.respira-tree-roots {
  position: absolute;
  inset: auto 32% 8%;
  height: 14%;
  border-radius: 999px;
  background: radial-gradient(
    ellipse at center,
    color-mix(in oklab, var(--bark-main) 50%, #000 50%) 0%,
    transparent 70%
  );
  opacity: 0.9;
}

.respira-labels {
  position: absolute;
  inset: auto 0 10%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  text-align: center;
  font-family: var(--font-funkhaus, inherit);
  font-size: 0.75rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  pointer-events: none;
  z-index: 2;
}

.respira-label-phase {
  color: color-mix(in oklab, var(--accent) 70%, var(--tone-ink) 30%);
}

.respira-label-sub {
  font-size: 0.68rem;
  text-transform: none;
  letter-spacing: 0.08em;
  opacity: 0.8;
}

.respira-label-abuelo {
  margin-top: 2px;
  font-size: 0.7rem;
  text-transform: none;
  opacity: 0.9;
}

.respira-tree-canopy,
.respira-tree-aura,
.respira-tree-trunk,
.respira-tree-roots {
  transition:
    transform 900ms ease-out,
    filter 900ms ease-out,
    opacity 900ms ease-out;
}

/* Breathing phases */
.respira-root[data-breath-phase='inhale'] .respira-tree-canopy {
  transform: translateY(-4px) scale(1.04);
  filter: saturate(1.08);
}
.respira-root[data-breath-phase='inhale'] .respira-tree-aura {
  transform: scale(1.12);
  opacity: 1;
}
.respira-root[data-breath-phase='inhale'] .respira-tree-trunk {
  transform: translate(-50%, -2px) scaleY(1.03);
}
.respira-root[data-breath-phase='inhale'] .respira-tree-roots {
  opacity: 0.9;
}

.respira-root[data-breath-phase='hold'] .respira-tree-canopy {
  transform: translateY(-6px) scale(1.07);
  filter: saturate(1.12) brightness(1.02);
}
.respira-root[data-breath-phase='hold'] .respira-tree-aura {
  transform: scale(1.16);
  opacity: 1;
}
.respira-root[data-breath-phase='hold'] .respira-tree-trunk {
  transform: translate(-50%, -3px) scaleY(1.05);
}

.respira-root[data-breath-phase='exhale'] .respira-tree-canopy {
  transform: translateY(-2px) scale(0.97);
  filter: saturate(0.9);
}
.respira-root[data-breath-phase='exhale'] .respira-tree-aura {
  transform: scale(0.98);
  opacity: 0.75;
}
.respira-root[data-breath-phase='exhale'] .respira-tree-roots {
  opacity: 1;
}
.respira-root[data-breath-phase='exhale'] .respira-tree-trunk {
  transform: translate(-50%, 1px) scaleY(0.98);
}

.respira-root[data-breath-phase='inhale'] {
  box-shadow: inset 0 0 120px rgba(246, 222, 180, 0.08);
}
.respira-root[data-breath-phase='exhale'] {
  box-shadow: inset 0 0 120px rgba(0, 0, 0, 0.45);
}

@media (max-width: 768px) {
  .respira-root {
    padding: 1.5rem 1.25rem 2.5rem;
  }

  .respira-hero {
    width: min(760px, 100vw - 2rem);
    margin: clamp(2rem, 12vh, 4rem) auto 1.25rem;
  }

  .respira-tree {
    width: min(210px, 70vw);
  }

  .respira-labels {
    inset: 50% 10% 5%;
  }
}
